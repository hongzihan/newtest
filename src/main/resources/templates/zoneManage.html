<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <title>Matrix Admin</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../static/css/bootstrap.min.css" />
    <link rel="stylesheet" href="../static/css/bootstrap-responsive.min.css" />
    <link rel="stylesheet" href="../static/css/fullcalendar.css" />
    <link rel="stylesheet" href="../static/css/matrix-style.css" />
    <link rel="stylesheet" href="../static/css/matrix-media.css" />
    <link href="../static/font-awesome/css/font-awesome.css" rel="stylesheet" />
    <link rel="stylesheet" href="../static/css/jquery.gritter.css" />
    <style type="text/css">

    </style>

</head>
<body>

<div th:replace="common/frame-main::frame-main"/>

<!--main-container-part-->
<div id="content">
    <!--Action boxes-->
    <div class="container-fluid">
        <div class="row-fluid">
            <div class="span12">
                <div class="widget-box">
                    <div class="widget-title"> <span class="icon"> <i class="fa fa-apple"></i> </span>
                        <h5>配置</h5>
                    </div>
                    <div class="widget-content nopadding">
                        <form class="form-horizontal">
                            <div class="control-group">
                                <label class="control-label">*新增区名 :</label>
                                <div class="controls">
                                    <input type="text" class="span10" placeholder="在这里输入要新增加的区名" name="preTime" id="zone_action_name"/>
                                    <button type="button" class="btn btn-success span1" onclick="addNewZoneName()">增加</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <div class="quick-actions_homepage">
            <ul class="quick-actions" id="ul_zone_manage">
                <li onclick="deleteZone(this)" class="bg_ls span1" th:each="zoneName : ${zoneNameList}">
                    <a><i class="fa fa-linux fa-3x"></i> <br/><strong>[[${zoneName}]]</strong></a>
                </li>
            </ul>
        </div>
        <!--End-Action boxes-->


    </div>
</div>

<!--end-main-container-part-->

<!--Footer-part-->

<div th:replace="common/frame-footer::frame-footer"/>

<!--end-Footer-part-->

<script src="../static/js/excanvas.min.js"></script>
<script src="../static/js/jquery.min.js"></script>
<script src="../static/js/jquery.ui.custom.js"></script>
<script src="../static/js/bootstrap.min.js"></script>
<script src="../static/js/jquery.flot.min.js"></script>
<script src="../static/js/jquery.flot.resize.min.js"></script>
<script src="../static/js/jquery.peity.min.js"></script>
<script src="../static/js/fullcalendar.min.js"></script>
<script src="../static/js/matrix.js"></script>
<script src="../static/js/matrix.dashboard.js"></script>
<script src="../static/js/select2.min.js"></script>
<script src="../static/js/jquery.dataTables.min.js"></script>

<script type="text/javascript">
    deleteZone = (obj) => {
        if(confirm('确定要删除吗')==true){
            let data = {zoneName:obj.children[0].lastChild.innerHTML}
            let url = "/config/deleteZoneNameConfig"
            $.ajax({
                type: 'post',
                data: data,
                url: url,
                cache:false,
                dataType:'text',
                async:false,
                success: function (msg) {
                    if (msg === "success") {
                        obj.parentNode.removeChild(obj)
                    } else {
                        alert("修改失败！")
                    }
                }
            })
            return true;
        }else{
            return false;
        }
    }

    addNewZoneName = () => {
        $.ajax({
            type: 'post',
            data: {zoneName:document.getElementById("zone_action_name").value},
            url: "/config/insertZoneNameConfig",
            cache:false,
            dataType:'text',
            async:false,
            success: function (msg) {
                if (msg === "success") {
                    let parentN = document.getElementById("ul_zone_manage")
                    let node1 = createANode("li", ["onclick", "class"],["deleteZone(this)", "bg_ls span1"])
                    let node2 = createANode("a",[],[])
                    let node3 = createANode("i",["class"],["fa fa-linux fa-3x"])
                    node2.appendChild(node3)
                    node3 = createANode("br",[],[])
                    node2.appendChild(node3)
                    node3 = createANode("strong",[],[])
                    node3.innerHTML = document.getElementById("zone_action_name").value
                    node2.appendChild(node3)
                    node1.appendChild(node2)
                    parentN.appendChild(node1);
                    alert("增加成功！")
                } else {
                    alert("增加失败！")
                }
            }
        })
    }
</script>
</body>
</html>
