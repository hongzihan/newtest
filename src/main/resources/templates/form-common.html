<!DOCTYPE html>
<html lang="en" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
<title>Matrix Admin</title>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="stylesheet" href="../static/css/bootstrap.min.css" />
<link rel="stylesheet" href="../static/css/bootstrap-responsive.min.css" />
<link rel="stylesheet" href="../static/css/colorpicker.css" />
<link rel="stylesheet" href="../static/css/datepicker.css" />
<link rel="stylesheet" href="../static/css/uniform.css" />
<link rel="stylesheet" href="../static/css/select2.css" />
<link rel="stylesheet" href="../static/css/matrix-style.css" />
<link rel="stylesheet" href="../static/css/matrix-media.css" />
<link rel="stylesheet" href="../static/css/bootstrap-wysihtml5.css" />
<link href="../static/font-awesome/css/font-awesome.css" rel="stylesheet" />
<link href='http://fonts.useso.com/css?family=Open+Sans:400,700,800' rel='stylesheet' type='text/css'>
</head>
<body>
<div th:replace="common/frame-main::frame-main"/>
<!--close-left-menu-stats-sidebar-->

<div id="content">
  <div class="container-fluid">
    <hr>
    <div class="row-fluid">

      <div class="span6">
        <div class="widget-box">
          <div class="widget-title"> <span class="icon"> <i class="icon-align-justify"></i> </span>
            <h5>物品操作</h5>
          </div>
          <div class="widget-content nopadding">
            <form action="" method="post" class="form-horizontal" id="form-action-item">
              <div class="control-group">
                <label class="control-label">*区名 :</label>
                <div class="controls">
                  <input type="text" class="span11" placeholder="天龙八部六派轻变" name="zoneid" id="item_action_zoneid" />
                </div>
              </div>
              <div class="control-group">
                <label class="control-label">*玩家名字 :</label>
                <div class="controls">
                  <input type="text" class="span11" placeholder="张三" name="playername" id="item_action_playername"/>
                </div>
              </div>
              <div class="control-group">
                <label class="control-label">*物品索引名 :</label>
                <div class="controls">
                  <input type="text"  class="span11" placeholder="1000元宝" name="keyname" id="item_action_keyname" />
                </div>
              </div>
              <div class="control-group">
                <label class="control-label">*物品数量 :</label>
                <div class="controls">
                  <input type="number" class="span11" placeholder='10'  value=1 name="count" id="item_action_count" />
                </div>
              </div>
              <div class="control-group">
                <label class="control-label">*操作类型 :</label>
                <div class="controls">
                  <label>
                    <input type="radio" name="type" value=1 checked/>
                    增加</label>
                  <label>
                    <input type="radio" name="type" value=2 />
                    删除</label>
                </div>
              </div>
              <div class="form-actions">
                <button type="button" class="btn btn-success" onclick="isvalid('物品操作')">保存</button>
              </div>
            </form>
          </div>
        </div>

        <div class="widget-box">
          <div class="widget-title"> <span class="icon"> <i class="icon-align-justify"></i> </span>
            <h5>邮件操作</h5>
          </div>
          <div class="widget-content nopadding">
            <form action="" method="post" class="form-horizontal" id="mail-action-form">
              <div class="control-group">
                <label class="control-label">*区名 :</label>
                <div class="controls">
                  <input type="text" class="span11" placeholder="天龙八部六派轻变" name="zoneid" id="mail_action_zoneid" />
                </div>
              </div>
              <div class="control-group">
                <label class="control-label">*玩家名字 :</label>
                <div class="controls">
                  <input type="text" class="span11" placeholder="张三" name="playername" id="mail_action_playername"/>
                </div>
              </div>
              <div class="control-group">
                <label class="control-label">*邮件标题 :</label>
                <div class="controls">
                  <input type="text"  class="span11" placeholder="1000元宝" name="mailtitle" id="mail_action_title" />
                </div>
              </div>
              <div class="control-group">
                <label class="control-label">*邮件内容 :</label>
                <div class="controls">
                  <input type="text"  class="span11" placeholder="1000元宝" name="mailtext" id="mail_action_text" />
                </div>
              </div>
              <div class="control-group">
                <label class="control-label">*金币 :</label>
                <div class="controls">
                  <input type="number" class="span11" placeholder='10' value=0 name="gold" id="mail_action_gold" />
                </div>
              </div>
              <div class="control-group">
                <label class="control-label">*元宝 :</label>
                <div class="controls">
                  <input type="number" class="span11" placeholder='10' value=0 name="yuanbao" id="mail_action_yuanbao" />
                </div>
              </div>
              <div class="control-group">
                <label class="control-label">*积分 :</label>
                <div class="controls">
                  <input type="number" class="span11" placeholder='10' value=0 name="integral" id="mail_action_integral" />
                </div>
              </div>
              <div class="control-group">
                <label class="control-label">*物品模板(请严格按照要求填写) :</label>
                <div class="controls">
                  <input type="text" class="span11" placeholder='["1000元宝", 1, 1]' name="templates" id="mail_action_templates" title='附件物品
lua表格式描述，不超过5个
item_templates 格式：
[
物品keyname 物品数量(不能超过最大堆叠数) 是否绑定(0/1)
"强效金创药", 1, 1,
"强效魔法药", 1, 1,
"灵元珠", 10, 1,
"新手之剑", 1, 1,
"新手头盔", 1, 1,
]'/>
                </div>
              </div>

              <div class="form-actions">
                <button type="button" class="btn btn-success" onclick="isvalid('邮件操作')">保存</button>
              </div>
            </form>
          </div>
        </div>

      </div>

      <div class="span6">
        <div class="widget-box">
          <div class="widget-title"> <span class="icon"> <i class="icon-align-justify"></i> </span>
            <h5>变量操作</h5>
          </div>
          <div class="widget-content nopadding">
            <form action="#" method="get" class="form-horizontal"  id="var_action_form">
              <div class="control-group">
                <label class="control-label">*区名 :</label>
                <div class="controls">
                  <input type="text" class="span11" placeholder="天龙八部六派轻变" name="zoneid" id="var_action_zoneid" />
                </div>
              </div>
              <div class="control-group">
                <label class="control-label">*操作对象 :</label>
                <div class="controls">
                  <label>
                    <input type="radio" name="targetobj" value='系统' checked/>
                    系统</label>
                  <label>
                    <input type="radio" name="targetobj" value='玩家' />
                    玩家</label>
                </div>
              </div>
              <div class="control-group">
                <label class="control-label">*变量类型 :</label>
                <div class="controls">
                  <label>
                    <input type="radio" name="vartype" value='int' checked/>
                    int</label>
                  <label>
                    <input type="radio" name="vartype" value='str' />
                    str</label>
                </div>
              </div>
              <div class="control-group">
                <label class="control-label">*变量名 :</label>
                <div class="controls">
                  <input type="text" class="span11" placeholder="xxx" name="varname" id="var_action_name"/>
                </div>
              </div>
              <div class="control-group">
                <label class="control-label">*变量值 :</label>
                <div class="controls">
                  <input type="text" class="span11" placeholder="xx" name="varvalue" id="var_action_value"/>
                </div>
              </div>
              <div class="control-group">
                <label class="control-label">合区类型(选填) :</label>
                <div class="controls">
                  <input type="number" class="span11" placeholder="6" value=6 name="areatype" id="var_action_areatype" title="0忽略，合区时保留目标数据库数据。
                  1替换，合区时保留源数据库数据。
                  2取大，合区时取大的数据，只对整型生效。
                  3取小，合区时取小的数据，只对整型生效。
                  4相加，合区时结果相加，只对整型生效。
                  5相连，合区时结果相连，只对字符串生效。
                  6删除，合区时清除"/>
                </div>
              </div>
              <div class="control-group">
                <label class="control-label">玩家名字(选填) :</label>
                <div class="controls">
                  <input type="text" class="span11" placeholder="小小白" name="playername" id="var_action_playername"/>
                </div>
              </div>

              <div class="form-actions">
                <button type="button" class="btn btn-success" onclick="isvalid('变量操作')">保存</button>
              </div>
            </form>
          </div>
        </div>
      </div> <!--/span6-->

    </div>
    <div class="row-fluid">
      <div class="widget-box">
        <div class="widget-title"> <span class="icon"> <i class="icon-align-justify"></i> </span>
          <h5>wysihtml5</h5>
        </div>
        <div class="widget-content">
          <div class="control-group">
            <form>
              <div class="controls">
                <textarea class="textarea_editor span12" rows="6" placeholder="Enter text ..."></textarea>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div th:replace="common/frame-footer::frame-footer"/>
<script src="../static/js/jquery.min.js"></script>
<script src="../static/js/jquery.ui.custom.js"></script>
<script src="../static/js/bootstrap.min.js"></script>
<script src="../static/js/bootstrap-colorpicker.js"></script>
<script src="../static/js/bootstrap-datepicker.js"></script>
<script src="../static/js/jquery.toggle.buttons.html"></script>
<script src="../static/js/masked.js"></script>
<script src="../static/js/jquery.uniform.js"></script>
<script src="../static/js/select2.min.js"></script>
<script src="../static/js/matrix.js"></script>
<script src="../static/js/matrix.form_common.js"></script>
<script src="../static/js/wysihtml5-0.3.0.js"></script>
<script src="../static/js/jquery.peity.min.js"></script>
<script src="../static/js/bootstrap-wysihtml5.js"></script>
<script>
	$('.textarea_editor').wysihtml5();

    function isvalid(msg) {
      if (msg === '物品操作') {
        let arr = ['item_action_zoneid', 'item_action_playername', 'item_action_keyname', 'item_action_count']
        let arr2 = ['区名', '玩家名字', '物品索引名', '物品数量']
        for (let i=0; i<arr.length; i++) {
          let elementV = document.getElementById(arr[i]).value;
          if (elementV === '') {
            alert(arr2[i] + '不能为空！');
            return false;
          }
        }
        //表单异步提交
        $.ajax({
          type: 'post',
          data: $('#form-action-item').serialize(),
          url: '/webAction/saveActionData_item',
          cache:false,
          dataType:'text',
          success: function (msg) {
            if (msg === "{code:200, msg:'成功'}") {
              alert("提交成功！")
            } else {
              alert("提交失败！")
            }
          }
        })
      } else if (msg === '变量操作') {
        let arr = ["var_action_zoneid", "var_action_name", "var_action_value", "var_action_areatype"]
        let arr2 = ["区名", "变量名", "变量值"]
        for (let i=0; i<arr.length; i++) {
          let elementV = document.getElementById(arr[i]).value;
          if (elementV === '') {
            alert(arr2[i] + '不能为空！');
            return false;
          }
        }
        //表单异步提交
        $.ajax({
          type: 'post',
          data: $('#var_action_form').serialize(),
          url: '/webAction/saveActionData_var',
          cache:false,
          dataType:'text',
          success: function (msg) {
            if (msg === "{code:200, msg:'成功'}") {
              alert("提交成功！")
            } else {
              alert("提交失败！")
            }
          }
        })
      } else if(msg == "邮件操作") {
        let arr = ["mail_action_zoneid", "mail_action_playername", "mail_action_title", "mail_action_gold", "mail_action_yuanbao", "mail_action_integral", "mail_action_templates"]
        let arr2 = ["区名", "玩家名", "邮件标题", "金币", "元宝", "积分", "物品模板"]
        for (let i=0; i<arr.length; i++) {
          let elementV = document.getElementById(arr[i]).value;
          if (elementV === '') {
            alert(arr2[i] + '不能为空！');
            return false;
          }
        }
        //表单异步提交
        $.ajax({
          type: 'post',
          data: $('#mail-action-form').serialize(),
          url: '/webAction/saveActionData_mail',
          cache:false,
          dataType:'text',
          success: function (msg) {
            if (msg === "{code:200, msg:'成功'}") {
              alert("提交成功！")
            } else {
              alert("提交失败！")
            }
          }
        })
      }
    }
</script>
</body>
</html>
